<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GolfDarts</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Prata&display=swap" rel="stylesheet">
</head>
<body>
  <h1>🏌️‍♂️ GolfDarts 🎯</h1>

  <div class="top-links">
    <a href="#" onclick="openModal('rulesModal')">Rules</a>
    <a href="#" onclick="openModal('scoringModal')">Scoring</a>
  </div>

  <div id="setup">
    <div class="form-group">
      <label for="playerCount">Number of Players:</label>
      <select id="playerCount" class="large-select">
        <option value="" disabled selected>Select Players</option>
      </select>
    </div>

    <button class="primary-button" onclick="createPlayerInputs()">Next</button>
    <div id="nameInputs"></div>
    <button id="startBtn" class="primary-button" onclick="startGame()" style="display:none;">Start Game</button>
  </div>

  <div id="game" style="display:none;">
    <h2 id="holeHeader">Hole 1</h2>
    <div id="scoreInputs"></div>
    <div class="form-actions">
      <button class="primary-button" onclick="submitPlayerScore()">Submit Score</button>
      <button class="primary-button" onclick="undoHole()">Undo Last Hole</button>
      <button class="primary-button" onclick="openModal('leaderboardModal')">Leaderboard</button>
    </div>
    <div id="scoreAnimation"></div>
    <h3>Scorecard</h3>
    <div id="leaderboard"></div>
  </div>

  <!-- Modals -->
  <div id="rulesModal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <h2>📘 Rules</h2>
      <p>Darts, played like golf. Each player throws all 3 of the darts at the "hole" number, entering the total number of hits. After all players have completed the hole, all players advance to the next hole. Repeat this process until all players complete hole 18. Every hole is scored as a par three. The person with the lowest score wins the round. See the "scoring" summary for how scoring is calculated.</p>
      <button onclick="closeModal('rulesModal')">Close</button>
    </div>
  </div>

  <div id="scoringModal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <h2>📊 Scoring</h2>
      <ul class="scoring-list">
        <li style="color:#ff4c4c;">*Miss! - Double Bogey (scored as 5)</li>
        <li style="color:#ffffff;">* 1 - Par (scored as 3)</li>
        <li style="color:#00ff00;">* 2 - Birdie (scored as 2)</li>
        <li style="color:#00ffff;">* 3 - Ace (scored as 1)</li>
        <li style="color:#ffcc00;">* 4 - Goose Egg (scored as 0)</li>
        <li style="color:#ff66ff;">* 5 - Icicle (scored as -1)</li>
        <li style="color:#00bfff;">* 6 - Polar Bear (scored as -2)</li>
        <li style="color:#ff9933;">* 7 - Frostbite (scored as -3)</li>
        <li style="color:#ff69b4;">* 8 - Snowman (scored as -4)</li>
        <li style="color:#ffff00;">* 9 - Avalanche (scored as -5)</li>
      </ul>
      <button onclick="closeModal('scoringModal')">Close</button>
    </div>
  </div>

  <div id="leaderboardModal" class="modal-overlay" style="display:none;">
    <div class="modal-content leaderboard-theme">
      <h2>🏆 Leaderboard</h2>
      <div id="modalLeaderboardContent"></div>
      <button onclick="closeModal('leaderboardModal')">Close</button>
    </div>
  </div>

  <div id="exitModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <h2>⚠️ Are you sure?</h2>
      <p>Your game will be lost if you leave this page.</p>
      <button onclick="resumeGame()">Stay</button>
      <button onclick="confirmExit()">Leave Anyway</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const select = document.getElementById("playerCount");
      for (let i = 1; i <= 20; i++) {
        const opt = document.createElement("option");
        opt.value = i;
        opt.textContent = i;
        select.appendChild(opt);
      }
    });

    window.addEventListener("beforeunload", function (e) {
      if (gameStarted) {
        e.preventDefault();
        e.returnValue = '';
      }
    });
  </script>
  <script src="script.js"></script>
</body>
</html>
